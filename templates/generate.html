{% extends "base.html" %}

{% block title %}Generate Exam ✨ · SmartQuiz{% endblock %}

{% block content %}
<div class="mb-8">
  <div class="flex items-center gap-2">
    <a href="/" class="text-sm text-muted-foreground hover:text-foreground">&larr; Back to exams</a>
  </div>
</div>

<div class="max-w-2xl mx-auto">
  <div class="text-center mb-12">
    <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-3xl flex items-center justify-center border-2 border-purple-500/30">
      <span class="text-3xl">✨</span>
    </div>
    <h1 class="text-3xl md:text-4xl font-bold tracking-tight mb-4">Generate Exam with AI</h1>
    <p class="text-xl text-muted-foreground max-w-md mx-auto">
      Describe what you need and get a ready-to-use SmartQuiz exam instantly.
    </p>
  </div>

  <form method="POST" action="/generate-exam" class="space-y-6">
    <!-- 1. Título -->
    <div>
      <label class="block text-sm font-medium mb-2">Exam Title</label>
      <input type="text" name="title" required
             class="w-full px-4 py-3 rounded-xl border border-border bg-background focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"
             placeholder="Ancient Greece History Exam">
    </div>

    <!-- 2. Describe el examen (principal para IA) -->
    <div>
      <label class="block text-sm font-medium mb-2">Describe the exam (for AI)</label>
      <textarea name="description" rows="4" required
                class="w-full px-4 py-3 rounded-xl border border-border bg-background focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all resize-vertical"
                placeholder="Create a history exam about Ancient Greece covering key figures like Socrates, Plato, Alexander the Great. Include battles, philosophy, mythology. 20 questions with 4 options A/B/C/D each, realistic difficulty, explanations for correct answers..."></textarea>
    </div>

    <!-- 3-9. Resto campos en grid -->
    <div class="grid md:grid-cols-2 gap-6">
      <!-- Número preguntas -->
      <div>
        <label class="block text-sm font-medium mb-2">Number of questions</label>
        <select name="num_questions" required class="w-full px-4 py-3 rounded-xl border border-border bg-background focus:ring-2 focus:ring-purple-500 focus:border-transparent">
          <option value="5">5 questions</option>
          <option value="10">10 questions</option>
          <option value="15">15 questions</option>
          <option value="20" selected>20 questions (max)</option>
        </select>
      </div>

      <!-- Dificultad -->
      <div>
        <label class="block text-sm font-medium mb-2">Difficulty</label>
        <select name="difficulty" required class="w-full px-4 py-3 rounded-xl border border-border bg-background focus:ring-2 focus:ring-purple-500 focus:border-transparent">
          <option value="easy">Easy</option>
          <option value="medium" selected>Medium</option>
          <option value="hard">Hard</option>
        </select>
      </div>

      <!-- Tipo preguntas (multi-select) -->
      <div>
        <label class="block text-sm font-medium mb-2">Question types</label>
        <div class="space-y-2">
          <label class="flex items-center gap-3 p-3 rounded-xl border border-border hover:bg-accent cursor-pointer transition-all">
            <input type="checkbox" name="types" value="single" checked class="w-4 h-4 rounded border-border focus:ring-purple-500">
            <span>Single choice</span>
          </label>
          <label class="flex items-center gap-3 p-3 rounded-xl border border-border hover:bg-accent cursor-pointer transition-all">
            <input type="checkbox" name="types" value="multiple" class="w-4 h-4 rounded border-border focus:ring-purple-500">
            <span>Multiple choice</span>
          </label>
          <label class="flex items-center gap-3 p-3 rounded-xl border border-border hover:bg-accent cursor-pointer transition-all">
            <input type="checkbox" name="types" value="true_false" class="w-4 h-4 rounded border-border focus:ring-purple-500">
            <span>True/False</span>
          </label>
          <label class="flex items-center gap-3 p-3 rounded-xl border border-border hover:bg-accent cursor-pointer transition-all">
            <input type="checkbox" name="types" value="fill_blank" class="w-4 h-4 rounded border-border focus:ring-purple-500">
            <span>Fill blank</span>
          </label>
        </div>
      </div>

      <!-- Tiempo límite -->
      <div>
        <label class="block text-sm font-medium mb-2">Time limit</label>
        <input type="number" name="time_limit_seconds" min="0" step="60" class="w-full px-4 py-3 rounded-xl border border-border bg-background focus:ring-2 focus:ring-purple-500 focus:border-transparent"
               placeholder="1800">
        <p class="text-xs text-muted-foreground mt-1">0 = unlimited</p>
      </div>
    </div>

    <div class="grid md:grid-cols-2 gap-6">
      <!-- Passing score -->
      <div>
        <label class="block text-sm font-medium mb-2">Passing score</label>
        <input type="number" name="passing_score" min="0" step="0.5" required class="w-full px-4 py-3 rounded-xl border border-border bg-background focus:ring-2 focus:ring-purple-500 focus:border-transparent"
               placeholder="14.0">
      </div>

      <!-- Total points -->
      <div>
        <label class="block text-sm font-medium mb-2">Total points</label>
        <input type="number" name="total_points" min="1" required class="w-full px-4 py-3 rounded-xl border border-border bg-background focus:ring-2 focus:ring-purple-500 focus:border-transparent"
               placeholder="20.0">
      </div>
    </div>

    <!-- Formato -->
    <div>
      <label class="block text-sm font-medium mb-2">Format</label>
      <div class="grid md:grid-cols-2 gap-4">
        <label class="flex items-center gap-3 p-4 rounded-xl border-2 border-border hover:border-purple-500 cursor-pointer transition-all">
          <input type="radio" name="format" value="multiple" checked class="w-5 h-5 rounded-full border-border focus:ring-purple-500">
          <div>
            <span class="font-medium">All questions</span>
            <p class="text-xs text-muted-foreground">See all questions at once</p>
          </div>
        </label>
        <label class="flex items-center gap-3 p-4 rounded-xl border-2 border-border hover:border-purple-500 cursor-pointer transition-all">
          <input type="radio" name="format" value="single" class="w-5 h-5 rounded-full border-border focus:ring-purple-500">
          <div>
            <span class="font-medium">One by one</span>
            <p class="text-xs text-muted-foreground">Navigate with Next/Previous</p>
          </div>
        </label>
      </div>
    </div>

    <!-- Submit -->
    <button type="submit" 
            class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold py-4 px-8 rounded-2xl text-lg shadow-2xl hover:from-purple-600 hover:to-pink-600 focus:ring-4 focus:ring-purple-500/50 transition-all transform hover:-translate-y-0.5">
      ✨ Generate Exam with AI
    </button>
  </form>
</div>
{% endblock %}
